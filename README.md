# Discord 진로상담 봇 명령어 및 기능 정리

## ✨ 주요 기능

- 🎫 **번호표 시스템**: 상담 종류별 번호표 발급 및 대기열 관리
- 🎛️ **관리자 패널**: 실시간 대기열 관리 및 상담 진행 상태 제어
- 🔊 **자동 음성 채널 이동**: 상담 시작 시 사용자 자동 이동
- 📊 **실시간 알림**: 관리자 채널 자동 알림 시스템
- 🎮 **게임 기능**: 테트리스, 가위바위보 등 대기시간 활용 게임

## 📋 슬래시 커맨드

### 👥 일반 사용자 명령어

| 명령어 | 매개변수 | 설명 | 사용 예시 |
|--------|----------|------|-----------|
| `/번호표` | 없음 | 진로상담 번호표 발급 패널 생성 | `/번호표` |
| `/대기열` | 없음 | 현재 대기 중인 상담 목록 확인 | `/대기열` |
| `/완료` | `번호` (정수) | 특정 번호표 상담 완료 처리 | `/완료 번호:5` |
| `/테트리스` | 없음 | 테트리스 게임 시작 | `/테트리스` |
| `/가위바위보` | 없음 | 삼세판 가위바위보 게임 시작 | `/가위바위보` |
| `/게임통계` | 없음 | 전체 게임 통계 및 순위 확인 | `/게임통계` |
| `/오늘게임통계` | 없음 | 오늘의 게임 통계 확인 | `/오늘게임통계` |

### 🛡️ 관리자 전용 명령어
| 명령어 | 권한 | 매개변수 | 설명 | 사용 예시 |
|--------|------|----------|------|-----------|
| `/초기화` | 없음 | 전체 대기열 초기화 및 리셋 | `/초기화` |
| `/관리자패널` | 없음 | 관리자 패널 생성 (버튼 UI) | `/관리자패널` |
| `/이동` | `사용자명` (문자열), `번호` (정수) | 특정 사용자를 상담용 음성 채널로 이동 | `/이동 사용자명:홍길동` |
| `/연결끊기` | `사용자명` (문자열), `번호` (정수) | 특정 사용자를 음성 채널에서 연결 끊기 | `/연결끊기 사용자명:홍길동` |
| `/디버그` | 없음 | 대기열 사용자 정보 및 디버깅 정보 표시 | `/디버그` |
| `/공지` | `메시지` (문자열) | 공지사항 전송 | `/공지 메시지:중요한 알림입니다` |
| `/기록초기화` | 없음 | 게임 기록 초기화 | `/기록초기화` |

## 🎛️ 관리자 패널 버튼

| 버튼명 | 아이콘 | 조건 | 기능 | 설명 |
|--------|--------|------|------|------|
| **상담 시작** | ▶️ | 대기열 있음 & 상담 진행 중 아님 | 다음 순서 상담 시작 + 자동 음성 채널 이동 | 첫 번째 대기자를 상담 시작 상태로 변경하고 음성 채널로 이동 |
| **상담 완료** | ✅ | 상담 진행 중 | 현재 진행 중인 상담 완료 | 진행 중인 상담을 완료하고 대기열에서 제거 |
| **대기열 새로고침** | 🔄 | 항상 표시 | 관리자 패널 새로고침 | 대기열 정보를 최신 상태로 업데이트 |
| **특정 번호 완료** | 🎯 | 항상 표시 | 지정한 번호표 완료 처리 | 모달창으로 번호 입력 후 해당 번호표 완료 |
| **사용자 이동** | 🔊 | 항상 표시 | 사용자를 상담용 음성 채널로 이동 | 사용자 ID/멘션/번호표 번호로 음성 채널 이동 |
| **음성 연결 끊기** | 🔇 | 항상 표시 | 사용자 음성 연결 끊기 |

## 🎫 사용자 인터페이스 버튼

| 버튼명 | 위치 | 기능 | 설명 |
|--------|------|------|------|
| **번호표 발급받기** | `/번호표` 명령어 실행 시 | 번호표 발급 프로세스 시작 | 상담 종류 선택 후 번호표 발급 |

## 📝 상담 종류 선택

| 이모지 | 상담 종류 | 설명 |
|--------|-----------|------|
| 🎯 | 진로 상담 | 진로 관련 고민 및 상담 |
| 📚 | 공부 상담 | 학습 방법 및 공부 관련 상담 |
| 💡 | 프로젝트 고민 | 프로젝트 기획 및 진행 상담 |
| 💬 | 기타 | 그 외 기타 상담 |

## ⚙️ 환경변수 설정

| 변수명 | 필수 여부 | 설명 | 예시 |
|--------|-----------|------|------|
| `DISCORD_TOKEN` | ✅ 필수 | Discord 봇 토큰 | `MTIzNDU2Nzg5...` |
| `NOTIFICATION_CHANNEL_ID` | ⚠️ 권장 | 일반 알림을 받을 채널 ID | `123456789012345678` |
| `ADMIN_CHANNEL_ID` | ⚠️ 권장 | 관리자 알림을 받을 채널 ID | `123456789012345678` |
| `CAREER_CHANNEL_ID` | ⚠️ 권장 | 진로상담용 음성 채널 ID | `987654321098765432` |
| `STUDY_VOICE_CHANNEL_ID` | ⚠️ 권장 | 공부상담용 음성 채널 ID | `987654321098765433` |
| `PROJECT_VOICE_CHANNEL_ID` | ⚠️ 권장 | 프로젝트상담용 음성 채널 ID | `987654321098765434` |

## 🔐 권한 체계

### 일반 사용자 권한
- 번호표 발급 및 조회
- 대기열 확인
- 자신의 상담 완료 처리
- 게임 기능 이용

### 관리자 권한 (Discord 서버 관리자)
- 모든 일반 사용자 기능
- 관리자 패널 사용
- 사용자 음성 채널 이동
- 대기열 관리 (시작/완료/초기화)
- 공지사항 전송
- 특정 번호표 강제 완료
- 게임 기록 관리

## 🎵 봇 권한 요구사항

Discord 봇에게 필요한 권한: 

OAuth2 URL Generator (bot, applications.commands)

✅ Use Slash Commands

✅ Send Messages

✅ Embed Links

✅ Connect

✅ Move Members

✅ View Channels

✅ Read Message History


Discord Developer Portal에서 활성화해야 할 인텐트:

✅ Server Members Intent (필수!)

✅ Message Content Intent

✅ Guilds Intent (기본값)

✅ Voice States Intent (기본값)

## 🔄 자동화 기능

| 기능 | 트리거 | 동작 |
|------|--------|------|
| **관리자 알림** | 새 번호표 발급 시 | 관리자 채널에 알림 전송 |
| **패널 자동 업데이트** | 대기열 변경 시 | 관리자 패널 실시간 갱신 |
| **음성 채널 이동** | 상담 시작 버튼 클릭 시 | 상담자 자동 음성 채널 이동 |
| **상태 관리** | 상담 완료 시 | 상담 진행 상태 자동 리셋 |
| **게임 기록** | 게임 완료 시 | 자동 점수 및 통계 저장 |

## 🎮 게임 시스템

### 테트리스
- 클래식 테트리스 게임
- 실시간 점수 및 레벨 시스템
- 개인 최고 기록 저장

### 가위바위보
- 삼세판 가위바위보
- 다른 사용자와 대전
- 승률 통계 관리

### 통계 시스템
- 전체 게임 순위
- 일일 게임 통계
- 개인 게임 기록


## 💡 사용 팁

1. **번호표 발급**: 한 사용자당 하나의 번호표만 발급 가능
2. **음성 채널 이동**: 사용자가 음성 채널에 접속한 상태여야 이동 가능
3. **관리자 패널**: 대기열 상황에 따라 버튼이 동적으로 표시/숨김
4. **번호표 번호**: 봇 재시작 시 1번부터 다시 시작 (데이터 초기화)
5. **중복 방지**: 이미 번호표를 보유한 사용자는 추가 발급 불가
6. **게임 기록**: 모든 게임 결과가 `game_records.json` 파일에 저장
